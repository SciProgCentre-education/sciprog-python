{"version":3,"sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/server/lib/app.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/server/lib/router.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/server/lib/server.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/server/lib/service.js"],"names":["JupyterLiteServer","Application","options","super","this","name","namespace","version","_serviceManager","id","event","mod","data","default","Object","prototype","hasOwnProperty","call","Array","isArray","forEach","item","registerPlugin","error","console","mods","registerPluginModule","serviceManager","Router","_routes","pattern","callback","_add","req","url","URL","method","pathname","r","match","matches","slice","body","JSON","parse","text","undefined","query","fromEntries","searchParams","Error","RegExp","push","JupyterServer","_router","contents","kernels","kernelspecs","sessions","settings","_contents","_kernels","_kernelspecs","_sessions","_settings","_addRoutes","init","Request","route","app","get","async","filename","res","listCheckpoints","Response","stringify","post","checkpoint","restoreCheckpoint","status","createCheckpoint","delete","deleteCheckpoint","_a","content","nb","path","copyFrom","copy_from","file","copy","newUntitled","patch","_b","newPath","rename","put","save","kernelId","restart","shutdown","specs","session","list","startNew","pluginPattern","pluginId","raw","plugins","getAll","LiteServiceManager","ServiceManager","server","serverSettings","ServerConnection","WebSocket","fetch","bind","_server"],"mappings":"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","file":"9148.66f58c6d7cd55a21b571.js","sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { Application } from '@lumino/application';\n/**\n * Server is the main application class. It is instantiated once and shared.\n */\nexport class JupyterLiteServer extends Application {\n    /**\n     * Construct a new JupyterLite object.\n     *\n     * @param options The instantiation options for a JupyterLiteServer application.\n     */\n    constructor(options) {\n        super(options);\n        /**\n         * The name of the application.\n         */\n        this.name = 'JupyterLite Server';\n        /**\n         * A namespace/prefix plugins may use to denote their provenance.\n         */\n        this.namespace = this.name;\n        /**\n         * The version of the application.\n         */\n        this.version = 'unknown';\n        this._serviceManager = null;\n    }\n    /**\n     * Get the underlying lite service manager for this app.\n     */\n    get serviceManager() {\n        return this._serviceManager;\n    }\n    /**\n     * Attach the application shell to the DOM.\n     *\n     * @param id - The id of the host node for the shell, or `''`.\n     *\n     * #### Notes\n     * For this server application there is no shell to attach\n     */\n    attachShell(id) {\n        // no-op\n    }\n    /**\n     * A method invoked on a window `'resize'` event.\n     *\n     * #### Notes\n     * For this server application there is no shell to update\n     */\n    evtResize(event) {\n        // no-op\n    }\n    /**\n     * Register plugins from a plugin module.\n     *\n     * @param mod - The plugin module to register.\n     */\n    registerPluginModule(mod) {\n        let data = mod.default;\n        // Handle commonjs exports.\n        if (!Object.prototype.hasOwnProperty.call(mod, '__esModule')) {\n            data = mod;\n        }\n        if (!Array.isArray(data)) {\n            data = [data];\n        }\n        data.forEach(item => {\n            try {\n                this.registerPlugin(item);\n            }\n            catch (error) {\n                console.error(error);\n            }\n        });\n    }\n    /**\n     * Register the plugins from multiple plugin modules.\n     *\n     * @param mods - The plugin modules to register.\n     */\n    registerPluginModules(mods) {\n        mods.forEach(mod => {\n            this.registerPluginModule(mod);\n        });\n    }\n    /**\n     * Register the underlying lite service manager for this app.\n     *\n     * @param serviceManager The Service Manager for the app.\n     */\n    registerServiceManager(serviceManager) {\n        this._serviceManager = serviceManager;\n    }\n}\n","/**\n * A simple router.\n */\nexport class Router {\n    constructor() {\n        this._routes = [];\n    }\n    /**\n     * Add a new GET route\n     *\n     * @param pattern The pattern to match\n     * @param callback The function to call on pattern match\n     *\n     */\n    get(pattern, callback) {\n        this._add('GET', pattern, callback);\n    }\n    /**\n     * Add a new PUT route\n     *\n     * @param pattern The pattern to match\n     * @param callback The function to call on pattern match\n     *\n     */\n    put(pattern, callback) {\n        this._add('PUT', pattern, callback);\n    }\n    /**\n     * Add a new POST route\n     *\n     * @param pattern The pattern to match\n     * @param callback The function to call on pattern match\n     *\n     */\n    post(pattern, callback) {\n        this._add('POST', pattern, callback);\n    }\n    /**\n     * Add a new PATCH route\n     *\n     * @param pattern The pattern to match\n     * @param callback The function to call on pattern match\n     *\n     */\n    patch(pattern, callback) {\n        this._add('PATCH', pattern, callback);\n    }\n    /**\n     * Add a new DELETE route\n     *\n     * @param pattern The pattern to match\n     * @param callback The function to call on pattern match\n     *\n     */\n    delete(pattern, callback) {\n        this._add('DELETE', pattern, callback);\n    }\n    /**\n     * Route a request.\n     *\n     * @param req The request to route.\n     */\n    async route(req) {\n        const url = new URL(req.url);\n        const { method } = req;\n        const { pathname } = url;\n        for (const r of this._routes) {\n            if (r.method !== method) {\n                continue;\n            }\n            const match = pathname.match(r.pattern);\n            if (!match) {\n                continue;\n            }\n            const matches = match.slice(1);\n            let body;\n            if (r.method === 'PATCH' || r.method === 'PUT' || r.method === 'POST') {\n                try {\n                    body = JSON.parse(await req.text());\n                }\n                catch {\n                    body = undefined;\n                }\n            }\n            return r.callback.call(null, {\n                pathname,\n                body,\n                query: Object.fromEntries(url.searchParams)\n            }, ...matches);\n        }\n        throw new Error('Cannot route ' + req.method + ' ' + req.url);\n    }\n    /**\n     * Add a new route.\n     *\n     * @param method The method\n     * @param pattern The pattern\n     * @param callback The callback\n     */\n    _add(method, pattern, callback) {\n        if (typeof pattern === 'string') {\n            pattern = new RegExp(pattern);\n        }\n        this._routes.push({\n            method,\n            pattern,\n            callback\n        });\n    }\n}\n","import { Router } from './router';\n/**\n * A (very, very) simplified Jupyter Server running in the browser.\n */\nexport class JupyterServer {\n    /**\n     * Construct a new JupyterServer.\n     */\n    constructor(options) {\n        this._router = new Router();\n        const { contents, kernels, kernelspecs, sessions, settings } = options;\n        this._contents = contents;\n        this._kernels = kernels;\n        this._kernelspecs = kernelspecs;\n        this._sessions = sessions;\n        this._settings = settings;\n        this._addRoutes();\n    }\n    /**\n     * Handle an incoming request from the client.\n     *\n     * @param req The incoming request\n     * @param init The optional init request\n     */\n    async fetch(req, init) {\n        if (!(req instanceof Request)) {\n            throw Error('Request info is not a Request');\n        }\n        return this._router.route(req);\n    }\n    /**\n     * Add the routes.\n     */\n    _addRoutes() {\n        const app = this._router;\n        // GET /api/contents/{path}/checkpoints - Get a list of checkpoints for a file\n        app.get('/api/contents/(.+)/checkpoints', async (req, filename) => {\n            const res = await this._contents.listCheckpoints(filename);\n            return new Response(JSON.stringify(res));\n        });\n        // POST /api/contents/{path}/checkpoints/{checkpoint_id} - Restore a file to a particular checkpointed state\n        app.post('/api/contents/(.+)/checkpoints/(.*)', async (req, filename, checkpoint) => {\n            const res = await this._contents.restoreCheckpoint(filename, checkpoint);\n            return new Response(JSON.stringify(res), { status: 204 });\n        });\n        // POST /api/contents/{path}/checkpoints - Create a new checkpoint for a file\n        app.post('/api/contents/(.+)/checkpoints', async (req, filename) => {\n            const res = await this._contents.createCheckpoint(filename);\n            return new Response(JSON.stringify(res), { status: 201 });\n        });\n        // DELETE /api/contents/{path}/checkpoints/{checkpoint_id} - Delete a checkpoint\n        app.delete('/api/contents/(.+)/checkpoints/(.*)', async (req, filename, checkpoint) => {\n            const res = await this._contents.deleteCheckpoint(filename, checkpoint);\n            return new Response(JSON.stringify(res), { status: 204 });\n        });\n        // GET /api/contents/{path} - Get contents of file or directory\n        app.get('/api/contents(.*)', async (req, filename) => {\n            var _a;\n            const options = {\n                content: ((_a = req.query) === null || _a === void 0 ? void 0 : _a.content) === '1'\n            };\n            const nb = await this._contents.get(filename, options);\n            return new Response(JSON.stringify(nb));\n        });\n        // POST /api/contents/{path} - Create a new file in the specified path\n        app.post('/api/contents(.*)', async (req, path) => {\n            const options = req.body;\n            const copyFrom = options === null || options === void 0 ? void 0 : options.copy_from;\n            let file;\n            if (copyFrom) {\n                file = await this._contents.copy(copyFrom, path);\n            }\n            else {\n                file = await this._contents.newUntitled(options);\n            }\n            return new Response(JSON.stringify(file), { status: 201 });\n        });\n        // PATCH /api/contents/{path} - Rename a file or directory without re-uploading content\n        app.patch('/api/contents(.*)', async (req, filename) => {\n            var _a, _b;\n            const newPath = (_b = (_a = req.body) === null || _a === void 0 ? void 0 : _a.path) !== null && _b !== void 0 ? _b : '';\n            filename = filename[0] === '/' ? filename.slice(1) : filename;\n            const nb = await this._contents.rename(filename, newPath);\n            return new Response(JSON.stringify(nb));\n        });\n        // PUT /api/contents/{path} - Save or upload a file\n        app.put('/api/contents/(.+)', async (req, filename) => {\n            const body = req.body;\n            const nb = await this._contents.save(filename, body);\n            return new Response(JSON.stringify(nb));\n        });\n        // DELETE /api/contents/{path} - Delete a file in the given path\n        app.delete('/api/contents/(.+)', async (req, filename) => {\n            await this._contents.delete(filename);\n            return new Response(null, { status: 204 });\n        });\n        // POST /api/kernels/{kernel_id} - Restart a kernel\n        app.post('/api/kernels/(.*)/restart', async (req, kernelId) => {\n            const res = await this._kernels.restart(kernelId);\n            return new Response(JSON.stringify(res));\n        });\n        // DELETE /api/kernels/{kernel_id} - Kill a kernel and delete the kernel id\n        app.delete('/api/kernels/(.*)', async (req, kernelId) => {\n            const res = await this._kernels.shutdown(kernelId);\n            return new Response(JSON.stringify(res), { status: 204 });\n        });\n        // KernelSpecs\n        app.get('/api/kernelspecs', async (req) => {\n            const res = this._kernelspecs.specs;\n            return new Response(JSON.stringify(res));\n        });\n        // NbConvert\n        app.get('/api/nbconvert', async (req) => {\n            return new Response(JSON.stringify({}));\n        });\n        // GET /api/sessions/{session} - Get session\n        app.get('/api/sessions/(.+)', async (req, id) => {\n            const session = await this._sessions.get(id);\n            return new Response(JSON.stringify(session), { status: 200 });\n        });\n        // GET /api/sessions - List available sessions\n        app.get('/api/sessions', async (req) => {\n            const sessions = await this._sessions.list();\n            return new Response(JSON.stringify(sessions), { status: 200 });\n        });\n        // PATCH /api/sessions/{session} - This can be used to rename a session\n        app.patch('/api/sessions(.*)', async (req, id) => {\n            const options = req.body;\n            const session = await this._sessions.patch(options);\n            return new Response(JSON.stringify(session), { status: 200 });\n        });\n        // DELETE /api/sessions/{session} - Delete a session\n        app.delete('/api/sessions/(.+)', async (req, id) => {\n            await this._sessions.shutdown(id);\n            return new Response(null, { status: 204 });\n        });\n        // POST /api/sessions - Create a new session or return an existing session if a session of the same name already exists\n        app.post('/api/sessions', async (req) => {\n            const options = req.body;\n            const session = await this._sessions.startNew(options);\n            return new Response(JSON.stringify(session), { status: 201 });\n        });\n        // Settings\n        // TODO: improve the regex\n        // const pluginPattern = new RegExp(/(?:@([^/]+?)[/])?([^/]+?):(\\w+)/);\n        const pluginPattern = '/api/settings/((?:@([^/]+?)[/])?([^/]+?):([^:]+))$';\n        app.get(pluginPattern, async (req, pluginId) => {\n            const settings = await this._settings.get(pluginId);\n            return new Response(JSON.stringify(settings));\n        });\n        app.put(pluginPattern, async (req, pluginId) => {\n            const body = req.body;\n            const { raw } = body;\n            await this._settings.save(pluginId, raw);\n            return new Response(null, { status: 204 });\n        });\n        app.get('/api/settings', async (req) => {\n            const plugins = await this._settings.getAll();\n            return new Response(JSON.stringify(plugins));\n        });\n    }\n}\n","import { ServiceManager, ServerConnection } from '@jupyterlab/services';\nimport { WebSocket } from 'mock-socket';\n/**\n * A custom ServiceManager to run in the browser\n */\nexport class LiteServiceManager extends ServiceManager {\n    /**\n     * Construct a new service provider.\n     *\n     * @param options The instantiation options for the service manager.\n     */\n    constructor(options) {\n        var _a;\n        const server = options.server;\n        super({\n            ...options,\n            serverSettings: {\n                ...ServerConnection.makeSettings(),\n                WebSocket,\n                fetch: (_a = server.fetch.bind(server)) !== null && _a !== void 0 ? _a : undefined\n            }\n        });\n        this._server = server;\n    }\n    /**\n     * Get the underlying Jupyter Server\n     */\n    get server() {\n        return this._server;\n    }\n}\n"],"sourceRoot":""}