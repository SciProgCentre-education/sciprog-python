(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[3181],{43181:(e,t,s)=>{"use strict";s.r(t),s.d(t,{LogLevelSwitcher:()=>y,default:()=>w});var o=s(88647),l=s(19573),n=s(91401),a=s(94257),i=s(80198),r=s(85),d=s(44588),c=s(34016),h=s(17179),g=s(10189),u=s(66065),m=s(96927),_=s.n(m),C=s(58137);function p(e){const t=(e.translator||h.nullTranslator).load("jupyterlab");let s="";return e.newMessages>0?s=t.__("%1 new messages, %2 log entries for %3",e.newMessages,e.logEntries,e.source):s+=t.__("%1 log entries for %2",e.logEntries,e.source),_().createElement(c.GroupItem,{spacing:0,onClick:e.handleClick,title:s},_().createElement(g.listIcon.react,{top:"2px",stylesheet:"statusBar"}),e.newMessages>0?_().createElement(c.TextItem,{source:e.newMessages}):_().createElement(_().Fragment,null))}class v extends l.VDomRenderer{constructor(e){super(new v.Model(e.loggerRegistry)),this.translator=e.translator||h.nullTranslator,this._handleClick=e.handleClick,this.addClass(c.interactiveItem),this.addClass("jp-LogConsoleStatusItem")}render(){if(null===this.model||0===this.model.version)return this.hide(),null;this.show();const{flashEnabled:e,messages:t,source:s,version:o,versionDisplayed:l,versionNotified:n}=this.model;return null!==s&&e&&o>n?(this._flashHighlight(),this.model.sourceNotified(s,o)):null!==s&&e&&o>l?this._showHighlighted():this._clearHighlight(),_().createElement(p,{handleClick:this._handleClick,logEntries:t,newMessages:o-l,source:this.model.source,translator:this.translator})}_flashHighlight(){this._showHighlighted(),this.removeClass("jp-LogConsole-flash"),requestAnimationFrame((()=>{this.addClass("jp-LogConsole-flash")}))}_showHighlighted(){this.addClass("jp-mod-selected")}_clearHighlight(){this.removeClass("jp-LogConsole-flash"),this.removeClass("jp-mod-selected")}}!function(e){class t extends l.VDomModel{constructor(e){super(),this.flashEnabledChanged=new C.Signal(this),this._flashEnabled=!0,this._source=null,this._sourceVersion=new Map,this._loggerRegistry=e,this._loggerRegistry.registryChanged.connect(this._handleLogRegistryChange,this),this._handleLogRegistryChange()}get messages(){return null===this._source?0:this._loggerRegistry.getLogger(this._source).length}get version(){return null===this._source?0:this._loggerRegistry.getLogger(this._source).version}get source(){return this._source}set source(e){this._source!==e&&(this._source=e,this.stateChanged.emit())}get versionDisplayed(){var e,t;return null===this._source?0:null!==(t=null===(e=this._sourceVersion.get(this._source))||void 0===e?void 0:e.lastDisplayed)&&void 0!==t?t:0}get versionNotified(){var e,t;return null===this._source?0:null!==(t=null===(e=this._sourceVersion.get(this._source))||void 0===e?void 0:e.lastNotified)&&void 0!==t?t:0}get flashEnabled(){return this._flashEnabled}set flashEnabled(e){this._flashEnabled!==e&&(this._flashEnabled=e,this.flashEnabledChanged.emit(),this.stateChanged.emit())}sourceDisplayed(e,t){if(null===e||null===t)return;const s=this._sourceVersion.get(e);let o=!1;s.lastDisplayed<t&&(s.lastDisplayed=t,o=!0),s.lastNotified<t&&(s.lastNotified=t,o=!0),o&&e===this._source&&this.stateChanged.emit()}sourceNotified(e,t){if(null===e)return;const s=this._sourceVersion.get(e);s.lastNotified<t&&(s.lastNotified=t,e===this._source&&this.stateChanged.emit())}_handleLogRegistryChange(){const e=this._loggerRegistry.getLoggers();for(const t of e)this._sourceVersion.has(t.source)||(t.contentChanged.connect(this._handleLogContentChange,this),this._sourceVersion.set(t.source,{lastDisplayed:0,lastNotified:0}))}_handleLogContentChange({source:e},t){e===this._source&&this.stateChanged.emit()}}e.Model=t}(v||(v={}));const f="@jupyterlab/logconsole-extension:plugin";var L;!function(e){e.addCheckpoint="logconsole:add-checkpoint",e.clear="logconsole:clear",e.open="logconsole:open",e.setLevel="logconsole:set-level"}(L||(L={}));const b={activate:function(e,t,s,o,a,i,r,d,c,h){const u=a.load("jupyterlab");let m=null,_=null;const C=new n.LoggerRegistry({defaultRendermime:s,maxLength:1e3}),p=new l.WidgetTracker({namespace:"logconsole"});r&&r.restore(p,{command:L.open,name:()=>"logconsole"});const b=new v({loggerRegistry:C,handleClick:()=>{var t;m?e.shell.activateById(m.id):w({insertMode:"split-bottom",ref:null===(t=e.shell.currentWidget)||void 0===t?void 0:t.id})},translator:a}),w=(t={})=>{_=new n.LogConsolePanel(C,a),_.source=void 0!==t.source?t.source:o.currentWidget?o.currentWidget.context.path:null,m=new l.MainAreaWidget({content:_}),m.addClass("jp-LogConsole"),m.title.closable=!0,m.title.icon=g.listIcon,m.title.label=u.__("Log Console");const s=new l.CommandToolbarButton({commands:e.commands,id:L.addCheckpoint}),i=new l.CommandToolbarButton({commands:e.commands,id:L.clear});m.toolbar.addItem("lab-log-console-add-checkpoint",s),m.toolbar.addItem("lab-log-console-clear",i),m.toolbar.addItem("level",new y(m.content,a)),_.sourceChanged.connect((()=>{e.commands.notifyCommandChanged()})),_.sourceDisplayed.connect(((e,{source:t,version:s})=>{b.model.sourceDisplayed(t,s)})),m.disposed.connect((()=>{m=null,_=null,e.commands.notifyCommandChanged()})),e.shell.add(m,"main",{ref:t.ref,mode:t.insertMode}),p.add(m),m.update(),e.commands.notifyCommandChanged()};function E(e){if(m&&e===m)return;let t;t=e&&o.has(e)?e.context.path:null,_&&(_.source=t),b.model.source=t}if(e.commands.addCommand(L.open,{label:u.__("Show Log Console"),execute:(e={})=>{m?m.dispose():w(e)},isToggled:()=>null!==m}),e.commands.addCommand(L.addCheckpoint,{execute:()=>{var e;null===(e=null==_?void 0:_.logger)||void 0===e||e.checkpoint()},icon:g.addIcon,isEnabled:()=>!!_&&null!==_.source,label:u.__("Add Checkpoint")}),e.commands.addCommand(L.clear,{execute:()=>{var e;null===(e=null==_?void 0:_.logger)||void 0===e||e.clear()},icon:g.clearIcon,isEnabled:()=>!!_&&null!==_.source,label:u.__("Clear Log")}),e.commands.addCommand(L.setLevel,{execute:e=>{(null==_?void 0:_.logger)&&(_.logger.level=e.level)},isEnabled:()=>!!_&&null!==_.source,label:e=>{return u.__("Set Log Level to %1",0===(t=e.level).length?t:t[0].toUpperCase()+t.slice(1));var t}}),e.contextMenu.addItem({command:L.open,selector:".jp-Notebook"}),d&&d.viewMenu.addGroup([{command:L.open}]),i&&i.addItem({command:L.open,category:u.__("Main Area")}),h&&h.registerStatusItem("@jupyterlab/logconsole-extension:status",{item:b,align:"left",isActive:()=>!0,activeStateChanged:b.model.stateChanged}),e.restored.then((()=>{E(t.currentWidget),t.currentChanged.connect(((e,{newValue:t})=>E(t)))})),c){const t=e=>{C.maxLength=e.get("maxLogEntries").composite,b.model.flashEnabled=e.get("flash").composite};Promise.all([c.load(f),e.restored]).then((([e])=>{t(e),e.changed.connect((e=>{t(e)}))})).catch((e=>{console.error(e.message)}))}return C},id:f,provides:n.ILoggerRegistry,requires:[o.ILabShell,r.IRenderMimeRegistry,i.INotebookTracker,h.ITranslator],optional:[l.ICommandPalette,o.ILayoutRestorer,a.IMainMenu,d.ISettingRegistry,c.IStatusBar],autoStart:!0};class y extends l.ReactWidget{constructor(e,t){super(),this.handleChange=e=>{this._logConsole.logger&&(this._logConsole.logger.level=e.target.value),this.update()},this.handleKeyDown=e=>{13===e.keyCode&&this._logConsole.activate()},this._id=`level-${u.UUID.uuid4()}`,this.translator=t||h.nullTranslator,this._trans=this.translator.load("jupyterlab"),this.addClass("jp-LogConsole-toolbarLogLevel"),this._logConsole=e,e.source&&this.update(),e.sourceChanged.connect(this._updateSource,this)}_updateSource(e,{oldValue:t,newValue:s}){null!==t&&e.loggerRegistry.getLogger(t).stateChanged.disconnect(this.update,this),null!==s&&e.loggerRegistry.getLogger(s).stateChanged.connect(this.update,this),this.update()}render(){const e=this._logConsole.logger;return m.createElement(m.Fragment,null,m.createElement("label",{htmlFor:this._id,className:null===e?"jp-LogConsole-toolbarLogLevel-disabled":void 0},this._trans.__("Log Level:")),m.createElement(g.HTMLSelect,{id:this._id,className:"jp-LogConsole-toolbarLogLevelDropdown",onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:null==e?void 0:e.level,"aria-label":this._trans.__("Log level"),disabled:null===e,options:null===e?[]:[[this._trans.__("Critical"),"Critical"],[this._trans.__("Error"),"Error"],[this._trans.__("Warning"),"Warning"],[this._trans.__("Info"),"Info"],[this._trans.__("Debug"),"Debug"]].map((e=>({label:e[0],value:e[1].toLowerCase()})))}))}}const w=b}}]);
//# sourceMappingURL=3181.b5384e1b4c71ec95285f.js.map