"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[8207,6493,4602],{68207:(t,e,s)=>{s.r(e),s.d(e,{YBaseCell:()=>g,YCodeCell:()=>y,YDocument:()=>l,YFile:()=>c,YMarkdownCell:()=>p,YNotebook:()=>h,YRawCell:()=>m,convertYMapEventToMapChange:()=>_,createCellFromType:()=>d,createMutex:()=>M,createStandaloneCell:()=>u});var a=s(93315),n=s(41649),o=s(6493),r=s(85230);const i=t=>JSON.parse(JSON.stringify(t));class l{constructor(){this.isDisposed=!1,this.ydoc=new r.Doc,this.source=this.ydoc.getText("source"),this.ystate=this.ydoc.getMap("state"),this.undoManager=new r.UndoManager([this.source],{trackedOrigins:new Set([this])}),this.awareness=new o.GL(this.ydoc),this._changed=new n.Signal(this)}transact(t,e=!0){this.ydoc.transact(t,e?this:null)}dispose(){this.isDisposed=!0,this.ydoc.destroy()}canUndo(){return this.undoManager.undoStack.length>0}canRedo(){return this.undoManager.redoStack.length>0}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}clearUndoHistory(){this.undoManager.clear()}get changed(){return this._changed}}class c extends l{constructor(){super(),this._modelObserver=t=>{const e={};e.sourceChange=t.changes.delta,this._changed.emit(e)},this._onStateChanged=t=>{const e=[];t.keysChanged.forEach((s=>{const a=t.changes.keys.get(s);e.push({name:s,oldValue:(null==a?void 0:a.oldValue)?a.oldValue:0,newValue:this.ystate.get(s)})})),this._changed.emit({stateChange:e})},this.ysource=this.ydoc.getText("source"),this.ysource.observe(this._modelObserver),this.ystate.observe(this._onStateChanged)}dispose(){this.ysource.unobserve(this._modelObserver),this.ystate.unobserve(this._onStateChanged)}static create(){return new c}getSource(){return this.ysource.toString()}setSource(t){this.transact((()=>{const e=this.ysource;e.delete(0,e.length),e.insert(0,t)}))}updateSource(t,e,s=""){this.transact((()=>{const a=this.ysource;a.insert(t,s),a.delete(t+s.length,e-t)}))}}class h extends l{constructor(t){super(),this._onYCellsChanged=t=>{t.changes.added.forEach((t=>{const e=t.content.type;this._ycellMapping.has(e)||this._ycellMapping.set(e,d(e));const s=this._ycellMapping.get(e);s._notebook=this,this.disableDocumentWideUndoRedo?s._undoManager=new r.UndoManager([s.ymodel],{}):s._undoManager=this.undoManager})),t.changes.deleted.forEach((t=>{const e=t.content.type,s=this._ycellMapping.get(e);s&&(s.dispose(),this._ycellMapping.delete(e))}));let e=0;const s=[];t.changes.delta.forEach((t=>{if(null!=t.insert){const a=t.insert.map((t=>this._ycellMapping.get(t)));s.push({insert:a}),this.cells.splice(e,0,...a),e+=t.insert.length}else null!=t.delete?(s.push(t),this.cells.splice(e,t.delete)):null!=t.retain&&(s.push(t),e+=t.retain)})),this._changed.emit({cellsChange:s})},this._onMetadataChanged=t=>{if(t.keysChanged.has("metadata")){const e=t.changes.keys.get("metadata"),s={oldValue:(null==e?void 0:e.oldValue)?e.oldValue:void 0,newValue:this.getMetadata()};this._changed.emit({metadataChange:s})}},this._onStateChanged=t=>{const e=[];t.keysChanged.forEach((s=>{const a=t.changes.keys.get(s);e.push({name:s,oldValue:(null==a?void 0:a.oldValue)?a.oldValue:0,newValue:this.ystate.get(s)})})),this._changed.emit({stateChange:e})},this.ycells=this.ydoc.getArray("cells"),this.ymeta=this.ydoc.getMap("meta"),this.ymodel=this.ydoc.getMap("model"),this.undoManager=new r.UndoManager([this.ycells],{trackedOrigins:new Set([this])}),this._ycellMapping=new Map,this._disableDocumentWideUndoRedo=t.disableDocumentWideUndoRedo,this.ycells.observe(this._onYCellsChanged),this.cells=this.ycells.toArray().map((t=>(this._ycellMapping.has(t)||this._ycellMapping.set(t,d(t)),this._ycellMapping.get(t)))),this.ymeta.observe(this._onMetadataChanged),this.ystate.observe(this._onStateChanged)}get nbformat(){return this.ystate.get("nbformat")}set nbformat(t){this.transact((()=>{this.ystate.set("nbformat",t)}),!1)}get nbformat_minor(){return this.ystate.get("nbformatMinor")}set nbformat_minor(t){this.transact((()=>{this.ystate.set("nbformatMinor",t)}),!1)}dispose(){this.ycells.unobserve(this._onYCellsChanged),this.ymeta.unobserve(this._onMetadataChanged),this.ystate.unobserve(this._onStateChanged)}getCell(t){return this.cells[t]}insertCell(t,e){this.insertCells(t,[e])}insertCells(t,e){e.forEach((t=>{this._ycellMapping.set(t.ymodel,t),this.disableDocumentWideUndoRedo||(t.undoManager=this.undoManager)})),this.transact((()=>{this.ycells.insert(t,e.map((t=>t.ymodel)))}))}moveCell(t,e){this.transact((()=>{const s=this.getCell(t).clone();this.deleteCell(t),this.insertCell(e,s)}))}deleteCell(t){this.deleteCellRange(t,t+1)}deleteCellRange(t,e){this.transact((()=>{this.ycells.delete(t,e-t)}))}getMetadata(){const t=this.ymeta.get("metadata");return t?i(t):{orig_nbformat:4}}setMetadata(t){this.ymeta.set("metadata",i(t))}updateMetadata(t){this.ymeta.set("metadata",Object.assign({},this.getMetadata(),t))}static create(t){return new h({disableDocumentWideUndoRedo:t})}get disableDocumentWideUndoRedo(){return this._disableDocumentWideUndoRedo}}const d=t=>{switch(t.get("cell_type")){case"code":return new y(t);case"markdown":return new p(t);case"raw":return new m(t);default:throw new Error("Found unknown cell type")}},u=(t,e)=>{switch(t){case"markdown":return p.createStandalone(e);case"code":return y.createStandalone(e);default:return m.createStandalone(e)}};class g{constructor(t){this._notebook=null,this.isStandalone=!1,this._modelObserver=t=>{const e={},s=t.find((t=>t.target===this.ymodel.get("source")));s&&(e.sourceChange=s.changes.delta);const a=t.find((t=>t.target===this.ymodel.get("outputs")));a&&(e.outputsChange=a.changes.delta);const n=t.find((t=>t.target===this.ymodel));if(n&&n.keysChanged.has("metadata")){const t=n.changes.keys.get("metadata");e.metadataChange={oldValue:(null==t?void 0:t.oldValue)?t.oldValue:void 0,newValue:this.getMetadata()}}if(n&&n.keysChanged.has("execution_count")){const t=n.changes.keys.get("execution_count");e.executionCountChange={oldValue:t.oldValue,newValue:this.ymodel.get("execution_count")}}const o=this.ymodel.get("source");n&&n.keysChanged.has("source")&&(e.sourceChange=[{delete:this._prevSourceLength},{insert:o.toString()}]),this._prevSourceLength=o.length,this._changed.emit(e)},this.isDisposed=!1,this._undoManager=null,this._changed=new n.Signal(this),this.ymodel=t;const e=t.get("source");this._prevSourceLength=e?e.length:0,this.ymodel.observeDeep(this._modelObserver)}get ysource(){return this.ymodel.get("source")}get awareness(){var t;return(null===(t=this.notebook)||void 0===t?void 0:t.awareness)||null}transact(t,e=!0){this.notebook&&e?this.notebook.transact(t):this.ymodel.doc.transact(t,this)}get undoManager(){var t;return this.notebook?(null===(t=this.notebook)||void 0===t?void 0:t.disableDocumentWideUndoRedo)?this._undoManager:this.notebook.undoManager:this._undoManager}set undoManager(t){this._undoManager=t}undo(){var t;null===(t=this.undoManager)||void 0===t||t.undo()}redo(){var t;null===(t=this.undoManager)||void 0===t||t.redo()}canUndo(){return!!this.undoManager&&this.undoManager.undoStack.length>0}canRedo(){return!!this.undoManager&&this.undoManager.redoStack.length>0}clearUndoHistory(){var t;null===(t=this.undoManager)||void 0===t||t.clear()}get notebook(){return this._notebook}static create(t=a.UUID.uuid4()){const e=new r.Map,s=new r.Text;return e.set("source",s),e.set("metadata",{}),e.set("cell_type",this.prototype.cell_type),e.set("id",t),new this(e)}static createStandalone(t){const e=this.create(t);return e.isStandalone=!0,(new r.Doc).getArray().insert(0,[e.ymodel]),e._undoManager=new r.UndoManager([e.ymodel],{trackedOrigins:new Set([e])}),e}clone(){const t=new r.Map,e=new r.Text(this.getSource());t.set("source",e),t.set("metadata",this.getMetadata()),t.set("cell_type",this.cell_type),t.set("id",this.getId());const s=new(0,this.constructor)(t);return s._undoManager=this.undoManager,s}get changed(){return this._changed}dispose(){this.ymodel.unobserveDeep(this._modelObserver)}getAttachments(){return this.ymodel.get("attachments")}setAttachments(t){this.transact((()=>{null==t?this.ymodel.set("attachments",t):this.ymodel.delete("attachments")}))}getId(){return this.ymodel.get("id")}getSource(){return this.ymodel.get("source").toString()}setSource(t){const e=this.ymodel.get("source");this.transact((()=>{e.delete(0,e.length),e.insert(0,t)}))}updateSource(t,e,s=""){this.transact((()=>{const a=this.ysource;a.insert(t,s),a.delete(t+s.length,e-t)}))}get cell_type(){throw new Error("A YBaseCell must not be constructed")}getMetadata(){return i(this.ymodel.get("metadata"))}setMetadata(t){this.transact((()=>{this.ymodel.set("metadata",i(t))}))}toJSON(){return{id:this.getId(),cell_type:this.cell_type,source:this.getSource(),metadata:this.getMetadata()}}}class y extends g{get cell_type(){return"code"}get execution_count(){return this.ymodel.get("execution_count")}set execution_count(t){this.transact((()=>{this.ymodel.set("execution_count",t)}))}getOutputs(){return i(this.ymodel.get("outputs").toArray())}setOutputs(t){const e=this.ymodel.get("outputs");this.transact((()=>{e.delete(0,e.length),e.insert(0,t)}),!1)}updateOutputs(t,e,s=[]){const a=this.ymodel.get("outputs"),n=e<a.length?e-t:a.length-t;this.transact((()=>{a.delete(t,n),a.insert(t,s)}),!1)}static create(t){const e=super.create(t);return e.ymodel.set("execution_count",0),e.ymodel.set("outputs",new r.Array),e}static createStandalone(t){const e=super.createStandalone(t);return e.ymodel.set("execution_count",null),e.ymodel.set("outputs",new r.Array),e}clone(){const t=super.clone(),e=new r.Array;return e.insert(0,this.getOutputs()),t.ymodel.set("execution_count",this.execution_count),t.ymodel.set("outputs",e),t}toJSON(){return{id:this.getId(),cell_type:"code",source:this.getSource(),metadata:this.getMetadata(),outputs:this.getOutputs(),execution_count:this.execution_count}}}class m extends g{static create(t){return super.create(t)}static createStandalone(t){return super.createStandalone(t)}get cell_type(){return"raw"}toJSON(){return{id:this.getId(),cell_type:"raw",source:this.getSource(),metadata:this.getMetadata(),attachments:this.getAttachments()}}}class p extends g{static create(t){return super.create(t)}static createStandalone(t){return super.createStandalone(t)}get cell_type(){return"markdown"}toJSON(){return{id:this.getId(),cell_type:"markdown",source:this.getSource(),metadata:this.getMetadata(),attachments:this.getAttachments()}}}function _(t){let e=new Map;return t.changes.keys.forEach(((t,s)=>{e.set(s,{action:t.action,oldValue:t.oldValue,newValue:this.ymeta.get(s)})})),e}const M=()=>{let t=!0;return e=>{if(t){t=!1;try{e()}finally{t=!0}}}}},11565:(t,e,s)=>{s.d(e,{Z$:()=>a,s7:()=>n,Dp:()=>o,$m:()=>r});const a=t=>t[t.length-1],n=(t,e)=>{for(let s=0;s<e.length;s++)t.push(e[s])},o=Array.from,r=(t,e)=>{return t.length===e.length&&(s=(t,s)=>t===e[s],t.every(s));var s}},1872:(t,e,s)=>{s.d(e,{PP:()=>o,WY:()=>r,UV:()=>i,Hi:()=>l});var a=s(11565),n=s(69600);const o=(t,e,s=0)=>{try{for(;s<t.length;s++)t[s](...e)}finally{s<t.length&&o(t,e,s+1)}},r=()=>{},i=(t,e)=>t===e||null!=t&&null!=e&&t.constructor===e.constructor&&(t instanceof Array&&a.$m(t,e)||"object"==typeof t&&n.$m(t,e)),l=(t,e)=>{if(null==t||null==e)return((t,e)=>t===e)(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:if(t.byteLength!==e.byteLength)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;break;case Set:if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;break;case Map:if(t.size!==e.size)return!1;for(const s of t.keys())if(!e.has(s)||!l(t.get(s),e.get(s)))return!1;break;case Object:if(n.kE(t)!==n.kE(e))return!1;for(const s in t)if(!n.l$(t,s)||!l(t[s],e[s]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!l(t[s],e[s]))return!1;break;default:return!1}return!0}},21332:(t,e,s)=>{s.d(e,{GW:()=>a,Wn:()=>n,mv:()=>o,IH:()=>r,VV:()=>i,Fp:()=>l,GR:()=>c});const a=Math.floor,n=(Math.ceil,Math.abs),o=(Math.imul,Math.round,Math.log10),r=(Math.log2,Math.log,Math.sqrt,(t,e)=>t+e),i=(t,e)=>t<e?t:e,l=(t,e)=>t>e?t:e,c=(Number.isNaN,Math.pow,Math.sign,t=>0!==t?t<0:1/t<0)},69600:(t,e,s)=>{s.d(e,{UI:()=>n,kE:()=>o,l$:()=>r,$m:()=>i}),Object.assign;const a=Object.keys,n=(t,e)=>{const s=[];for(const a in t)s.push(e(t[a],a));return s},o=t=>a(t).length,r=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i=(t,e)=>t===e||o(t)===o(e)&&((t,e)=>{for(const s in t)if(!e(t[s],s))return!1;return!0})(t,((t,s)=>(void 0!==t||r(e,s))&&e[s]===t))},6493:(t,e,s)=>{s.d(e,{GL:()=>c,Ag:()=>h,xq:()=>d,oy:()=>u});var a=s(84795),n=s(94072),o=s(40870),r=s(21332),i=s(75736),l=s(1872);s(85230);class c extends i.y{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const t=o.ZG();null!==this.getLocalState()&&15e3<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const e=[];this.meta.forEach(((s,a)=>{a!==this.clientID&&3e4<=t-s.lastUpdated&&this.states.has(a)&&e.push(a)})),e.length>0&&h(this,e,"timeout")}),r.GW(3e3)),t.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,s=this.meta.get(e),a=void 0===s?0:s.clock+1,n=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:a,lastUpdated:o.ZG()});const r=[],i=[],c=[],h=[];null===t?h.push(e):null==n?null!=t&&r.push(e):(i.push(e),l.Hi(n,t)||c.push(e)),(r.length>0||c.length>0||h.length>0)&&this.emit("change",[{added:r,updated:c,removed:h},"local"]),this.emit("update",[{added:r,updated:i,removed:h},"local"])}setLocalStateField(t,e){const s=this.getLocalState();null!==s&&this.setLocalState({...s,[t]:e})}getStates(){return this.states}}const h=(t,e,s)=>{const a=[];for(let s=0;s<e.length;s++){const n=e[s];if(t.states.has(n)){if(t.states.delete(n),n===t.clientID){const e=t.meta.get(n);t.meta.set(n,{clock:e.clock+1,lastUpdated:o.ZG()})}a.push(n)}}a.length>0&&(t.emit("change",[{added:[],updated:[],removed:a},s]),t.emit("update",[{added:[],updated:[],removed:a},s]))},d=(t,e,s=t.states)=>{const n=e.length,o=a.Mf();a.uE(o,n);for(let r=0;r<n;r++){const n=e[r],i=s.get(n)||null,l=t.meta.get(n).clock;a.uE(o,n),a.uE(o,l),a.uw(o,JSON.stringify(i))}return a._f(o)},u=(t,e,s)=>{const a=n.l1(e),r=o.ZG(),i=[],c=[],h=[],d=[],u=n.yg(a);for(let e=0;e<u;e++){const e=n.yg(a);let s=n.yg(a);const o=JSON.parse(n.kf(a)),u=t.meta.get(e),g=t.states.get(e),y=void 0===u?0:u.clock;(y<s||y===s&&null===o&&t.states.has(e))&&(null===o?e===t.clientID&&null!=t.getLocalState()?s++:t.states.delete(e):t.states.set(e,o),t.meta.set(e,{clock:s,lastUpdated:r}),void 0===u&&null!==o?i.push(e):void 0!==u&&null===o?d.push(e):null!==o&&(l.Hi(o,g)||h.push(e),c.push(e)))}(i.length>0||h.length>0||d.length>0)&&t.emit("change",[{added:i,updated:h,removed:d},s]),(i.length>0||c.length>0||d.length>0)&&t.emit("update",[{added:i,updated:c,removed:d},s])}}}]);
//# sourceMappingURL=8207.6ab3178cac4c1a55d28f.js.map