(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[8172],{8172:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var a,s=n(88647),r=n(19573),l=n(87939),i=n(15065),o=n(94257),c=n(17179),d=n(96927),u=n(77031),m=n(66065),h=n(58137),p=n(52522),g=n(86703),_=n(10189);class b extends u.SplitPanel{constructor(e){super(),this.addClass("jp-Licenses"),this.model=e.model,this.initLeftPanel(),this.initFilters(),this.initBundles(),this.initGrid(),this.initLicenseText(),this.setRelativeSizes([1,2,3]),this.model.initLicenses().then((()=>this._updateBundles())),this.model.trackerDataChanged.connect((()=>{this.title.label=this.model.title}))}dispose(){this.isDisposed||(this._bundles.currentChanged.disconnect(this.onBundleSelected,this),this.model.dispose(),super.dispose())}initLeftPanel(){this._leftPanel=new u.Panel,this._leftPanel.addClass("jp-Licenses-FormArea"),this.addWidget(this._leftPanel),u.SplitPanel.setStretch(this._leftPanel,1)}initFilters(){this._filters=new b.Filters(this.model),u.SplitPanel.setStretch(this._filters,1),this._leftPanel.addWidget(this._filters)}initBundles(){this._bundles=new u.TabBar({orientation:"vertical",renderer:new b.BundleTabRenderer(this.model)}),this._bundles.addClass("jp-Licenses-Bundles"),u.SplitPanel.setStretch(this._bundles,1),this._leftPanel.addWidget(this._bundles),this._bundles.currentChanged.connect(this.onBundleSelected,this),this.model.stateChanged.connect((()=>this._bundles.update()))}initGrid(){this._grid=new b.Grid(this.model),u.SplitPanel.setStretch(this._grid,1),this.addWidget(this._grid)}initLicenseText(){this._licenseText=new b.FullText(this.model),u.SplitPanel.setStretch(this._grid,1),this.addWidget(this._licenseText)}onBundleSelected(){var e;(null===(e=this._bundles.currentTitle)||void 0===e?void 0:e.label)&&(this.model.currentBundleName=this._bundles.currentTitle.label)}_updateBundles(){this._bundles.clearTabs();let e=0;const{currentBundleName:t}=this.model;let n=0;for(const a of this.model.bundleNames){const s=new u.Widget;s.title.label=a,a===t&&(n=e),this._bundles.insertTab(++e,s.title)}this._bundles.currentIndex=n}}!function(e){e.REPORT_FORMATS={markdown:{id:"markdown",title:"Markdown",icon:_.markdownIcon},csv:{id:"csv",title:"CSV",icon:_.spreadsheetIcon},json:{id:"csv",title:"JSON",icon:_.jsonIcon}},e.DEFAULT_FORMAT="markdown";class t extends r.VDomModel{constructor(e){super(),this._selectedPackageChanged=new h.Signal(this),this._trackerDataChanged=new h.Signal(this),this._currentPackageIndex=0,this._licensesReady=new m.PromiseDelegate,this._packageFilter={},this._trans=e.trans,this._licensesUrl=e.licensesUrl,this._serverSettings=e.serverSettings||g.ServerConnection.makeSettings(),e.currentBundleName&&(this._currentBundleName=e.currentBundleName),e.packageFilter&&(this._packageFilter=e.packageFilter),e.currentPackageIndex&&(this._currentPackageIndex=e.currentPackageIndex)}async initLicenses(){try{const e=await g.ServerConnection.makeRequest(this._licensesUrl,{},this._serverSettings);this._serverResponse=await e.json(),this._licensesReady.resolve(),this.stateChanged.emit(void 0)}catch(e){this._licensesReady.reject(e)}}async download(e){const t=`${this._licensesUrl}?format=${e.format}&download=1`,n=document.createElement("a");n.href=t,n.download="",document.body.appendChild(n),n.click(),document.body.removeChild(n)}get selectedPackageChanged(){return this._selectedPackageChanged}get trackerDataChanged(){return this._trackerDataChanged}get bundleNames(){var e;return Object.keys((null===(e=this._serverResponse)||void 0===e?void 0:e.bundles)||{})}get currentBundleName(){return this._currentBundleName?this._currentBundleName:this.bundleNames.length?this.bundleNames[0]:null}set currentBundleName(e){this._currentBundleName!==e&&(this._currentBundleName=e,this.stateChanged.emit(void 0),this._trackerDataChanged.emit(void 0))}get licensesReady(){return this._licensesReady.promise}get bundles(){var e;return(null===(e=this._serverResponse)||void 0===e?void 0:e.bundles)||{}}get currentPackageIndex(){return this._currentPackageIndex}set currentPackageIndex(e){this._currentPackageIndex!==e&&(this._currentPackageIndex=e,this._selectedPackageChanged.emit(void 0),this.stateChanged.emit(void 0),this._trackerDataChanged.emit(void 0))}get currentPackage(){var e;return this.currentBundleName&&this.bundles&&null!=this._currentPackageIndex?this.getFilteredPackages((null===(e=this.bundles[this.currentBundleName])||void 0===e?void 0:e.packages)||[])[this._currentPackageIndex]:null}get trans(){return this._trans}get title(){return`${this._currentBundleName||""} ${this._trans.__("Licenses")}`.trim()}get packageFilter(){return this._packageFilter}set packageFilter(e){this._packageFilter=e,this.stateChanged.emit(void 0),this._trackerDataChanged.emit(void 0)}getFilteredPackages(e){let t=[],n=Object.entries(this._packageFilter).filter((([e,t])=>t&&`${t}`.trim().length)).map((([e,t])=>[e,`${t}`.toLowerCase().trim().split(" ")]));for(const a of e){let e=0;for(const[t,s]of n){let n=0,r=`${a[t]}`.toLowerCase();for(const e of s)r.includes(e)&&(n+=1);n&&(e+=1)}e===n.length&&t.push(a)}return Object.values(t)}}e.Model=t;class n extends r.VDomRenderer{constructor(e){super(e),this.renderFilter=e=>{const t=this.model.packageFilter[e]||"";return d.createElement("input",{type:"text",name:e,defaultValue:t,className:"jp-mod-styled",onInput:this.onFilterInput})},this.onFilterInput=e=>{const t=e.currentTarget,{name:n,value:a}=t;this.model.packageFilter=Object.assign(Object.assign({},this.model.packageFilter),{[n]:a})},this.addClass("jp-Licenses-Filters"),this.addClass("jp-RenderedHTMLCommon")}render(){const{trans:e}=this.model;return d.createElement("div",null,d.createElement("label",null,d.createElement("strong",null,e.__("Filter Licenses By"))),d.createElement("ul",null,d.createElement("li",null,d.createElement("label",null,e.__("Package")),this.renderFilter("name")),d.createElement("li",null,d.createElement("label",null,e.__("Version")),this.renderFilter("versionInfo")),d.createElement("li",null,d.createElement("label",null,e.__("License")),this.renderFilter("licenseId"))),d.createElement("label",null,d.createElement("strong",null,e.__("Distributions"))))}}e.Filters=n;class a extends u.TabBar.Renderer{constructor(e){super(),this.closeIconSelector=".lm-TabBar-tabCloseIcon",this.model=e}renderTab(e){let t=e.title.caption,n=this.createTabKey(e),a=this.createTabStyle(e),s=this.createTabClass(e),r=this.createTabDataset(e);return p.h.li({key:n,className:s,title:t,style:a,dataset:r},this.renderIcon(e),this.renderLabel(e),this.renderCountBadge(e))}renderCountBadge(e){const t=e.title.label,{bundles:n}=this.model,a=this.model.getFilteredPackages((n&&t?n[t].packages:[])||[]);return p.h.label({},`${a.length}`)}}e.BundleTabRenderer=a;class s extends r.VDomRenderer{constructor(e){super(e),this.renderRow=(e,t)=>{const n=t===this.model.currentPackageIndex,a=()=>this.model.currentPackageIndex=t;return d.createElement("tr",{key:e.name,className:n?"jp-mod-selected":"",onClick:a},d.createElement("td",null,d.createElement("input",{type:"radio",name:"show-package-license",value:t,onChange:a,checked:n})),d.createElement("th",null,e.name),d.createElement("td",null,d.createElement("code",null,e.versionInfo)),d.createElement("td",null,d.createElement("code",null,e.licenseId)))},this.addClass("jp-Licenses-Grid"),this.addClass("jp-RenderedHTMLCommon")}render(){var e;const{bundles:t,currentBundleName:n,trans:a}=this.model,s=this.model.getFilteredPackages(t&&n&&(null===(e=t[n])||void 0===e?void 0:e.packages)||[]);return s.length?d.createElement("form",null,d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement("td",null),d.createElement("th",null,a.__("Package")),d.createElement("th",null,a.__("Version")),d.createElement("th",null,a.__("License")))),d.createElement("tbody",null,s.map(this.renderRow)))):d.createElement("blockquote",null,d.createElement("em",null,a.__("No Packages found")))}}e.Grid=s;class l extends r.VDomRenderer{constructor(e){super(e),this.addClass("jp-Licenses-Text"),this.addClass("jp-RenderedHTMLCommon"),this.addClass("jp-RenderedMarkdown")}render(){const{currentPackage:e,trans:t}=this.model;let n="",a=t.__("No Package selected"),s="";if(e){const{name:r,versionInfo:l,licenseId:i,extractedText:o}=e;n=`${r} v${l}`,a=`${t.__("License")}: ${i||t.__("No License ID found")}`,s=o||t.__("No License Text found")}return[d.createElement("h1",{key:"h1"},n),d.createElement("blockquote",{key:"quote"},d.createElement("em",null,a)),d.createElement("code",{key:"code"},s)]}}e.FullText=l}(b||(b={})),function(e){e.open="help:open",e.about="help:about",e.activate="help:activate",e.close="help:close",e.show="help:show",e.hide="help:hide",e.launchClassic="help:launch-classic-notebook",e.licenses="help:licenses",e.licenseReport="help:license-report",e.refreshLicenses="help:licenses-refresh"}(a||(a={}));const k="https:"===window.location.protocol,f=[{id:"@jupyterlab/help-extension:about",autoStart:!0,requires:[c.ITranslator],optional:[o.IMainMenu,r.ICommandPalette],activate:(e,t,n,s)=>{const{commands:l}=e,i=t.load("jupyterlab"),o=i.__("Help");l.addCommand(a.about,{label:i.__("About %1",e.name),execute:()=>{const t=i.__("Version %1",e.version),n=d.createElement("span",{className:"jp-About-version-info"},d.createElement("span",{className:"jp-About-version"},t)),a=d.createElement("span",{className:"jp-About-header"},d.createElement(_.jupyterIcon.react,{margin:"7px 9.5px",height:"auto",width:"58px"}),d.createElement("div",{className:"jp-About-header-info"},d.createElement(_.jupyterlabWordmarkIcon.react,{height:"auto",width:"196px"}),n)),s=d.createElement("span",{className:"jp-About-externalLinks"},d.createElement("a",{href:"https://github.com/jupyterlab/jupyterlab/graphs/contributors",target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},i.__("CONTRIBUTOR LIST")),d.createElement("a",{href:"https://jupyter.org/about.html",target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},i.__("ABOUT PROJECT JUPYTER"))),l=d.createElement("span",{className:"jp-About-copyright"},i.__("© 2015-2021 Project Jupyter Contributors")),o=d.createElement("div",{className:"jp-About-body"},s,l);return(0,r.showDialog)({title:a,body:o,buttons:[r.Dialog.createButton({label:i.__("Dismiss"),className:"jp-About-button jp-mod-reject jp-mod-styled"})]})}}),n&&n.helpMenu.addGroup([{command:a.about}],0),s&&s.addItem({command:a.about,category:o})}},{id:"@jupyterlab/help-extension:launch-classic",autoStart:!0,requires:[c.ITranslator],optional:[o.IMainMenu,r.ICommandPalette],activate:(e,t,n,s)=>{const{commands:r}=e,i=t.load("jupyterlab"),o=i.__("Help");r.addCommand(a.launchClassic,{label:i.__("Launch Classic Notebook"),execute:()=>{window.open(l.PageConfig.getBaseUrl()+"tree")}}),n&&n.helpMenu.addGroup([{command:a.launchClassic}],1),s&&s.addItem({command:a.launchClassic,category:o})}},{id:"@jupyterlab/help-extension:resources",autoStart:!0,requires:[o.IMainMenu,c.ITranslator],optional:[r.ICommandPalette,s.ILayoutRestorer,i.IInspector],activate:(e,t,n,s,i,o)=>{const c=n.load("jupyterlab");let u=0;const m=c.__("Help"),h=l.PageConfig.getBaseUrl(),{commands:p,shell:g,serviceManager:_}=e,b=new r.WidgetTracker({namespace:"help-doc"}),f=[{text:c.__("JupyterLab Reference"),url:"https://jupyterlab.readthedocs.io/en/stable/"},{text:c.__("JupyterLab FAQ"),url:"https://jupyterlab.readthedocs.io/en/stable/getting_started/faq.html"},{text:c.__("Jupyter Reference"),url:"https://jupyter.org/documentation"},{text:c.__("Jupyter Forum"),url:"https://discourse.jupyter.org/c/jupyterlab"},{text:c.__("Markdown Reference"),url:"https://commonmark.org/help/"}];f.sort(((e,t)=>e.text.localeCompare(t.text))),i&&i.restore(b,{command:a.open,args:e=>({url:e.content.url,text:e.content.title.label}),name:e=>e.content.url});const C=t.helpMenu,v=[o?"inspector:open":void 0].map((e=>({command:e})));C.addGroup(v,0);const E=f.map((e=>({args:e,command:a.open})));C.addGroup(E,10);const x=new Map;_.sessions.runningChanged.connect(((t,n)=>{var s;if(!n.length)return;const l=n[n.length-1];if(!l.kernel||x.has(l.kernel.name))return;const i=_.sessions.connectTo({model:l,kernelConnectionOptions:{handleComms:!1}});null===(s=i.kernel)||void 0===s||s.info.then((t=>{var n,s;const l=i.kernel.name;if(x.has(l))return;x.set(l,t);const o=()=>{let t=!1;const n=e.shell.currentWidget;return n?(C.kernelUsers.forEach((e=>{var a;e.tracker.has(n)&&(null===(a=e.getKernel(n))||void 0===a?void 0:a.name)===l&&(t=!0)})),t):t},u=`help-menu-${l}:banner`,m=null===(s=null===(n=_.kernelspecs)||void 0===n?void 0:n.specs)||void 0===s?void 0:s.kernelspecs[l];if(!m)return;const g=m.display_name;let b=m.resources["logo-64x64"];if(b){const e=b.indexOf("kernelspecs");b=h+b.slice(e)}p.addCommand(u,{label:c.__("About the %1 Kernel",g),isVisible:o,isEnabled:o,execute:()=>{const e=d.createElement("img",{src:b}),n=d.createElement("span",{className:"jp-About-header"},e,d.createElement("div",{className:"jp-About-header-info"},g)),a=d.createElement("pre",null,t.banner),s=d.createElement("div",{className:"jp-About-body"},a);return(0,r.showDialog)({title:n,body:s,buttons:[r.Dialog.createButton({label:c.__("Dismiss"),className:"jp-About-button jp-mod-reject jp-mod-styled"})]})}}),C.addGroup([{command:u}],20);const k=[];(t.help_links||[]).forEach((e=>{const t=`help-menu-${l}:${e.text}`;p.addCommand(t,{label:e.text,isVisible:o,isEnabled:o,execute:()=>p.execute(a.open,e)}),k.push({command:t})})),C.addGroup(k,21),i.dispose()}))})),p.addCommand(a.open,{label:e=>e.text,execute:e=>{const t=e.url,n=e.text;if(e.newBrowserTab||k&&"https:"!==l.URLExt.parse(t).protocol)return void window.open(t);const a=function(e,t){const n=new r.IFrame({sandbox:["allow-scripts","allow-forms"]});n.url=e,n.addClass("jp-Help"),n.title.label=t,n.id="help-doc-"+ ++u;const a=new r.MainAreaWidget({content:n});return a.addClass("jp-Help"),a}(t,n);return b.add(a),g.add(a,"main"),a}}),s&&(f.forEach((e=>{s.addItem({args:e,command:a.open,category:m})})),s.addItem({args:{reload:!0},command:"apputils:reset",category:m}))}},{id:"@jupyterlab/help-extension:licenses",autoStart:!0,requires:[c.ITranslator],optional:[o.IMainMenu,r.ICommandPalette,s.ILayoutRestorer],activate:(e,t,n,s,i)=>{if(!l.PageConfig.getOption("licensesUrl"))return;const{commands:o,shell:c}=e,d=t.load("jupyterlab"),u=d.__("Help"),m=d.__("Download All Licenses as"),h=d.__("Licenses"),p=d.__("Refresh Licenses");let g=0;const k=l.URLExt.join(l.PageConfig.getBaseUrl(),l.PageConfig.getOption("licensesUrl"))+"/",f=new r.WidgetTracker({namespace:"help-licenses"});function C(e){return b.REPORT_FORMATS[e]||b.REPORT_FORMATS[b.DEFAULT_FORMAT]}o.addCommand(a.licenses,{label:h,execute:e=>{const t=function(e){const t=new b.Model(Object.assign({licensesUrl:k,trans:d},e)),n=new b({model:t});n.id="help-licenses-"+ ++g,n.title.label=h,n.title.icon=_.copyrightIcon;const s=new r.MainAreaWidget({content:n,reveal:t.licensesReady});s.toolbar.addItem("refresh-licenses",new r.CommandToolbarButton({id:a.refreshLicenses,args:{noLabel:1},commands:o})),s.toolbar.addItem("spacer",r.Toolbar.createSpacerItem());for(const e of Object.keys(b.REPORT_FORMATS)){const t=new r.CommandToolbarButton({id:a.licenseReport,args:{format:e,noLabel:1},commands:o});s.toolbar.addItem(`download-${e}`,t)}return s}(e);return c.add(t,"main"),f.add(t),t.content.model.trackerDataChanged.connect((()=>{f.save(t)})),t}}),o.addCommand(a.refreshLicenses,{label:e=>e.noLabel?"":p,caption:p,icon:_.refreshIcon,execute:async()=>{var e;return null===(e=f.currentWidget)||void 0===e?void 0:e.content.model.initLicenses()}}),o.addCommand(a.licenseReport,{label:e=>{if(e.noLabel)return"";const t=C(`${e.format}`);return`${m} ${t.title}`},caption:e=>{const t=C(`${e.format}`);return`${m} ${t.title}`},icon:e=>C(`${e.format}`).icon,execute:async e=>{var t;const n=C(`${e.format}`);return await(null===(t=f.currentWidget)||void 0===t?void 0:t.content.model.download({format:n.id}))}}),s&&s.addItem({command:a.licenses,category:u}),n&&n.helpMenu.addGroup([{command:a.licenses}],0),i&&i.restore(f,{command:a.licenses,name:e=>"licenses",args:e=>{const{currentBundleName:t,currentPackageIndex:n,packageFilter:a}=e.content.model;return{currentBundleName:t,currentPackageIndex:n,packageFilter:a}}})}}]}}]);
//# sourceMappingURL=8172.bd2745923ac9cac1910d.js.map